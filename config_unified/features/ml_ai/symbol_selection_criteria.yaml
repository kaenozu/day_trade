# 銘柄選択基準設定ファイル
# Issue #854対応：銘柄選択システムの柔軟性と堅牢性強化

# 銘柄選択基準セット
criteria_sets:
  # 流動性重視基準
  liquid:
    min_volume: 5000000          # 最小出来高（500万株）
    max_volume: 50000000         # 最大出来高（5000万株）
    min_price: 500.0             # 最小価格（500円）
    max_price: 5000.0            # 最大価格（5000円）
    min_market_cap: 1000000000   # 最小時価総額（10億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.01         # 最小ボラティリティ（1%）
    max_volatility: 0.05         # 最大ボラティリティ（5%）
    liquidity_threshold: 0.8     # 流動性閾値（80%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 3    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # ボラティリティ重視基準
  volatile:
    min_volume: 1000000          # 最小出来高（100万株）
    max_volume: 100000000        # 最大出来高（1億株）
    min_price: 100.0             # 最小価格（100円）
    max_price: 10000.0           # 最大価格（10000円）
    min_market_cap: 500000000    # 最小時価総額（5億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.02         # 最小ボラティリティ（2%）
    max_volatility: 0.08         # 最大ボラティリティ（8%）
    liquidity_threshold: 0.6     # 流動性閾値（60%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 2    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # バランス型基準
  balanced:
    min_volume: 2000000          # 最小出来高（200万株）
    max_volume: 80000000         # 最大出来高（8000万株）
    min_price: 300.0             # 最小価格（300円）
    max_price: 8000.0            # 最大価格（8000円）
    min_market_cap: 1000000000   # 最小時価総額（10億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.015        # 最小ボラティリティ（1.5%）
    max_volatility: 0.06         # 最大ボラティリティ（6%）
    liquidity_threshold: 0.7     # 流動性閾値（70%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 2    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # 保守的基準
  conservative:
    min_volume: 10000000         # 最小出来高（1000万株）
    max_volume: 200000000        # 最大出来高（2億株）
    min_price: 1000.0            # 最小価格（1000円）
    max_price: 3000.0            # 最大価格（3000円）
    min_market_cap: 5000000000   # 最小時価総額（50億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.005        # 最小ボラティリティ（0.5%）
    max_volatility: 0.03         # 最大ボラティリティ（3%）
    liquidity_threshold: 0.85    # 流動性閾値（85%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 1    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # 大型株専用基準
  large_cap:
    min_volume: 5000000          # 最小出来高（500万株）
    max_volume: 500000000        # 最大出来高（5億株）
    min_price: 1000.0            # 最小価格（1000円）
    max_price: 20000.0           # 最大価格（20000円）
    min_market_cap: 10000000000  # 最小時価総額（100億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.01         # 最小ボラティリティ（1%）
    max_volatility: 0.04         # 最大ボラティリティ（4%）
    liquidity_threshold: 0.75    # 流動性閾値（75%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 2    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # 成長株基準
  growth:
    min_volume: 1000000          # 最小出来高（100万株）
    max_volume: 50000000         # 最大出来高（5000万株）
    min_price: 200.0             # 最小価格（200円）
    max_price: 15000.0           # 最大価格（15000円）
    min_market_cap: 500000000    # 最小時価総額（5億円）
    max_market_cap: 5000000000000   # 最大時価総額（5兆円）
    min_volatility: 0.02         # 最小ボラティリティ（2%）
    max_volatility: 0.10         # 最大ボラティリティ（10%）
    liquidity_threshold: 0.65    # 流動性閾値（65%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 3    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # デイトレード特化基準
  daytrading:
    min_volume: 10000000         # 最小出来高（1000万株）
    max_volume: 1000000000       # 最大出来高（10億株）
    min_price: 100.0             # 最小価格（100円）
    max_price: 5000.0            # 最大価格（5000円）
    min_market_cap: 1000000000   # 最小時価総額（10億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.02         # 最小ボラティリティ（2%）
    max_volatility: 0.12         # 最大ボラティリティ（12%）
    liquidity_threshold: 0.85    # 流動性閾値（85%）
    sector_diversification: false # セクター分散なし（流動性重視）
    max_symbols_per_sector: 10   # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

  # 高配当株基準
  dividend:
    min_volume: 2000000          # 最小出来高（200万株）
    max_volume: 100000000        # 最大出来高（1億株）
    min_price: 500.0             # 最小価格（500円）
    max_price: 10000.0           # 最大価格（10000円）
    min_market_cap: 5000000000   # 最小時価総額（50億円）
    max_market_cap: 10000000000000  # 最大時価総額（10兆円）
    min_volatility: 0.005        # 最小ボラティリティ（0.5%）
    max_volatility: 0.05         # 最大ボラティリティ（5%）
    liquidity_threshold: 0.7     # 流動性閾値（70%）
    sector_diversification: true # セクター分散
    max_symbols_per_sector: 2    # セクター当たり最大銘柄数
    exclude_symbols: []          # 除外銘柄リスト
    include_symbols: []          # 強制含有銘柄リスト

# 特定銘柄設定例
specific_symbols:
  # TOPIX Core30専用
  topix_core30:
    min_volume: 10000000
    max_volume: 1000000000
    min_price: 1000.0
    max_price: 50000.0
    min_market_cap: 50000000000  # 500億円以上
    max_market_cap: 10000000000000
    min_volatility: 0.01
    max_volatility: 0.06
    liquidity_threshold: 0.8
    sector_diversification: true
    max_symbols_per_sector: 5
    exclude_symbols: []
    include_symbols:
      - "7203"  # トヨタ自動車
      - "6758"  # ソニーグループ
      - "6861"  # キーエンス
      - "9984"  # ソフトバンクグループ

  # 新興市場専用
  emerging:
    min_volume: 500000
    max_volume: 20000000
    min_price: 100.0
    max_price: 5000.0
    min_market_cap: 100000000    # 1億円以上
    max_market_cap: 1000000000000  # 1兆円未満
    min_volatility: 0.03
    max_volatility: 0.15
    liquidity_threshold: 0.5
    sector_diversification: true
    max_symbols_per_sector: 5
    exclude_symbols: []
    include_symbols: []

# グローバル設定
global_settings:
  # デフォルト基準
  default_criteria: "balanced"

  # セクター分散設定
  sector_diversification:
    enabled: true
    min_sectors: 3
    max_sectors: 8
    prefer_even_distribution: true

  # リスク管理
  risk_management:
    max_correlation_threshold: 0.7
    max_single_sector_weight: 0.3
    exclude_penny_stocks: true
    penny_stock_threshold: 100.0

  # 品質管理
  quality_control:
    min_trading_days: 100
    min_avg_volume_consistency: 0.6
    exclude_suspended_stocks: true
    exclude_delisted_risk: true

  # パフォーマンス設定
  performance:
    cache_selection_results: true
    cache_ttl_seconds: 1800  # 30分
    parallel_processing: true
    max_concurrent_queries: 5

# 時間帯別設定
time_based_settings:
  # 市場開始前（8:00-9:00）
  pre_market:
    criteria_adjustments:
      min_volume_multiplier: 1.2
      liquidity_threshold_bonus: 0.05

  # 取引時間中（9:00-15:00）
  market_hours:
    criteria_adjustments:
      min_volume_multiplier: 1.0
      liquidity_threshold_bonus: 0.0

  # 市場終了後（15:00-18:00）
  post_market:
    criteria_adjustments:
      min_volume_multiplier: 0.8
      liquidity_threshold_bonus: -0.05

# セクター分類定義
sector_definitions:
  technology:
    keywords: ["ソフトウェア", "IT", "テクノロジー", "情報通信"]
    topix_codes: ["3050", "3100", "3150"]

  finance:
    keywords: ["銀行", "証券", "保険", "金融"]
    topix_codes: ["7050", "7100", "7150", "7200"]

  healthcare:
    keywords: ["製薬", "医療", "バイオ", "ヘルスケア"]
    topix_codes: ["4050", "4100"]

  consumer:
    keywords: ["小売", "消費", "食品", "繊維"]
    topix_codes: ["0050", "1050", "1100", "1300", "1350"]

  industrial:
    keywords: ["機械", "製造", "建設", "運輸"]
    topix_codes: ["2050", "2100", "5050", "5100", "5150", "5200", "5250"]

  energy:
    keywords: ["エネルギー", "石油", "ガス", "電力"]
    topix_codes: ["1600", "1650", "9050"]

  materials:
    keywords: ["素材", "化学", "鉄鋼", "非鉄金属"]
    topix_codes: ["1700", "1750", "3200", "3250", "3300", "3350", "3400", "3450"]

  utilities:
    keywords: ["電力", "ガス", "水道", "インフラ"]
    topix_codes: ["9050"]

  real_estate:
    keywords: ["不動産", "REIT"]
    topix_codes: ["8050"]

  communication:
    keywords: ["通信", "メディア", "放送"]
    topix_codes: ["9050"]

# 除外銘柄設定
exclusion_rules:
  # システム除外（常に除外）
  system_exclusions:
    - suspended_stocks: true      # 売買停止銘柄
    - delisted_risk: true        # 上場廃止リスク銘柄
    - shell_companies: true      # ペーパーカンパニー
    - insider_trading_risk: true # インサイダー取引リスク銘柄

  # 業種除外オプション
  sector_exclusions:
    gambling: false              # ギャンブル関連
    tobacco: false               # タバコ関連
    weapons: false               # 武器関連
    adult_entertainment: false   # アダルト関連

  # リスク除外
  risk_exclusions:
    high_volatility_threshold: 0.20  # 20%超のボラティリティ
    low_liquidity_threshold: 0.3     # 30%未満の流動性
    penny_stock_threshold: 100.0     # 100円未満
    market_cap_threshold: 50000000   # 5000万円未満

# バックテスト設定
backtest_settings:
  # 検証期間
  validation_periods:
    short_term: 30    # 30日
    medium_term: 90   # 90日
    long_term: 252    # 1年

  # 評価指標
  evaluation_metrics:
    - sharpe_ratio
    - max_drawdown
    - win_rate
    - avg_return
    - volatility

  # リバランス頻度
  rebalance_frequency: "weekly"  # daily, weekly, monthly

  # コスト設定
  transaction_costs:
    commission_rate: 0.001  # 0.1%
    spread_cost: 0.0005     # 0.05%
    market_impact: 0.0002   # 0.02%