## CLI引数解析とバリデーションの強化

### 概要
現在のCLIは、コマンドライン引数のバリデーションが不足している可能性があります。無効な入力が与えられた際に、より具体的でユーザーフレンドリーなエラーメッセージを提供し、入力ミスを防ぐことで、CLIの堅牢性と使いやすさを向上させる必要があります。

### 目的
- コマンドライン引数の入力エラーを早期に検出し、無効なコマンド実行を防止する。
- ユーザーに対して、より分かりやすく、具体的なフィードバックを提供する。
- CLIアプリケーション全体の信頼性を高める。

### 提案する対応
1. **厳密な型チェックと範囲バリデーション**:
   - 数値引数（例: 期間、閾値など）に対して、期待されるデータ型（整数、浮動小数点数）への変換と、有効な範囲内にあるかどうかのチェックを実装する。
   - 例えば、期間が負の数である場合や、パーセンテージが100を超える場合などにエラーを出す。
2. **文字列フォーマットのバリデーション**:
   - 日付、時刻、シンボルコードなどの文字列引数に対して、期待されるフォーマット（例: `YYYY-MM-DD`）に従っているか、正規表現などを用いてバリデーションを行う。
3. **排他的な引数グループ**:
   - 相互に排他的な引数（例: `--start-date`と`--period`が同時に指定できない場合）がある場合、`argparse`の`add_mutually_exclusive_group`などを活用して、これらの引数が同時に指定された場合にエラーを発生させる。
4. **デフォルト値と必須引数の明確化**:
   - 引数のヘルプメッセージにおいて、デフォルト値や必須引数であることを明確に記述し、ユーザーが引数の役割を理解しやすくする。
5. **カスタムエラーメッセージ**:
   - 標準のエラーメッセージでは不十分な場合、カスタムのエラーメッセージを定義し、問題の原因と解決策をより具体的に示す。

### 考慮事項
- 既存のCLIコマンドと引数の構造を損なわないように変更を行う。
- バリデーションルールは、ユーザーの一般的な使用シナリオを想定して定義する。
