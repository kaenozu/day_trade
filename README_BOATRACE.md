# ğŸš¤ Boatraceç«¶è‰‡äºˆæƒ³ã‚·ã‚¹ãƒ†ãƒ 

BoatraceOpenAPIã‚’æ´»ç”¨ã—ãŸç«¶è‰‡äºˆæƒ³ãƒ»èˆŸåˆ¸è³¼å…¥æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## âœ¨ æ©Ÿèƒ½æ¦‚è¦

### ğŸ¯ äºˆæƒ³ãƒ»åˆ†ææ©Ÿèƒ½
- **BoatraceOpenAPIçµ±åˆ** - å…¬å¼ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±å–å¾—
- **ç«¶æŠ€å ´ç‰¹æ€§åˆ†æ** - å…¨å›½24ç«¶æŠ€å ´ã®æ°´é¢æ¡ä»¶ãƒ»ç‰¹å¾´ã‚’è€ƒæ…®ã—ãŸåˆ†æ
- **é¸æ‰‹æˆç¸¾åˆ†æ** - å‹ç‡ã€ã‚¯ãƒ©ã‚¹ã€ç«¶æŠ€å ´é©æ€§ã€èª¿å­ã‚’ç·åˆçš„ã«è©•ä¾¡
- **AIäºˆæƒ³ã‚¨ãƒ³ã‚¸ãƒ³** - çµ±è¨ˆåˆ†æã«åŸºã¥ãç¢ºç‡è¨ˆç®—ã¨è²·ã„ç›®æ¨å¥¨
- **ãƒ¬ãƒ¼ã‚¹ç«¶äº‰åŠ›åˆ†æ** - æ¿€æˆ¦åº¦ãƒ»å¤§è’ã‚Œç¢ºç‡ã®åˆ¤å®š

### ğŸ’° æŠ•ç¥¨ãƒ»åæ”¯ç®¡ç†
- **å¤šæ§˜ãªæŠ•ç¥¨æˆ¦ç•¥** - ä¿å®ˆçš„ãƒ»ãƒãƒ©ãƒ³ã‚¹ãƒ»ç©æ¥µçš„ãƒ»AIæˆ¦ç•¥
- **èˆŸåˆ¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ** - è³¼å…¥è¨˜éŒ²ãƒ»çµæœç¢ºèªãƒ»é…å½“è¨ˆç®—
- **ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†** - æŠ•è³‡åæ”¯ãƒ»ROIãƒ»ãƒªã‚¹ã‚¯åˆ†æ
- **è³‡é‡‘ç®¡ç†** - KellyåŸºæº–ãƒ™ãƒ¼ã‚¹ã®æœ€é©è³­ã‘é‡‘è¨ˆç®—

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- **è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åé›†** - APIã‹ã‚‰å‡ºèµ°è¡¨ãƒ»çµæœã®è‡ªå‹•å–å¾—ãƒ»ä¿å­˜
- **SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** - ç«¶æŠ€å ´ãƒ»é¸æ‰‹ãƒ»ãƒ¬ãƒ¼ã‚¹ãƒ»äºˆæƒ³ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡** - æˆ¦ç•¥åˆ¥ãƒ»æœŸé–“åˆ¥ã®æˆç¸¾åˆ†æ

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
src/boatrace/
â”œâ”€â”€ core/           # ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ api_client.py       # BoatraceOpenAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ data_models.py      # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©
â”‚   â”œâ”€â”€ stadium_manager.py  # ç«¶æŠ€å ´ç®¡ç†
â”‚   â””â”€â”€ race_manager.py     # ãƒ¬ãƒ¼ã‚¹ç®¡ç†
â”œâ”€â”€ data/           # ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â”‚   â”œâ”€â”€ database.py         # SQLAlchemyãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ data_collector.py   # ãƒ‡ãƒ¼ã‚¿åé›†
â”‚   â””â”€â”€ data_processor.py   # ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ãƒ»åˆ†æ
â”œâ”€â”€ prediction/     # äºˆæƒ³ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ prediction_engine.py  # äºˆæƒ³ã‚¨ãƒ³ã‚¸ãƒ³æœ¬ä½“
â”‚   â”œâ”€â”€ racer_analyzer.py     # é¸æ‰‹åˆ†æ
â”‚   â””â”€â”€ race_analyzer.py      # ãƒ¬ãƒ¼ã‚¹åˆ†æ
â”œâ”€â”€ betting/        # æŠ•ç¥¨ç®¡ç†
â”‚   â”œâ”€â”€ ticket_manager.py     # èˆŸåˆ¸ç®¡ç†
â”‚   â”œâ”€â”€ betting_strategy.py   # æŠ•ç¥¨æˆ¦ç•¥
â”‚   â””â”€â”€ portfolio.py          # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†
â””â”€â”€ web/           # Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆä»Šå¾Œå®Ÿè£…ï¼‰
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡Œ
```bash
# ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¢ã®å®Ÿè¡Œ
python main_boatrace.py

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python tests/test_boatrace_integration.py
```

### 2. åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```python
from src.boatrace.core.api_client import BoatraceAPIClient
from src.boatrace.core.race_manager import RaceManager
from src.boatrace.prediction.prediction_engine import PredictionEngine
from src.boatrace.data.database import init_database

# ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
database = init_database()
api_client = BoatraceAPIClient()
race_manager = RaceManager(api_client)
prediction_engine = PredictionEngine()

# ä»Šæ—¥ã®ãƒ¬ãƒ¼ã‚¹å–å¾—
today_races = race_manager.get_today_races()
print(f"ä»Šæ—¥ã®ãƒ¬ãƒ¼ã‚¹æ•°: {len(today_races)}")

# äºˆæƒ³å®Ÿè¡Œ
if today_races:
    race = today_races[0]
    prediction = prediction_engine.predict_race(race.id)
    
    if prediction:
        print(f"äºˆæƒ³ä¿¡é ¼åº¦: {float(prediction.confidence):.2f}")
        print("æ¨å¥¨è²·ã„ç›®:")
        for bet in prediction.recommended_bets:
            print(f"  {bet['bet_type']}: {bet['numbers']}")
```

### 3. æŠ•ç¥¨æˆ¦ç•¥ã®æ´»ç”¨

```python
from src.boatrace.betting.betting_strategy import StrategyManager
from src.boatrace.betting.ticket_manager import TicketManager
from decimal import Decimal

# æˆ¦ç•¥ç®¡ç†
strategy_manager = StrategyManager()
ticket_manager = TicketManager()

# æˆ¦ç•¥é¸æŠ
strategy = strategy_manager.get_strategy("balanced")
budget = Decimal('5000')

# è²·ã„ç›®æ¨å¥¨ç”Ÿæˆ
recommendations = strategy.generate_bets(prediction, budget, race_info)

# èˆŸåˆ¸è³¼å…¥è¨˜éŒ²
for rec in recommendations:
    ticket_id = ticket_manager.purchase_ticket(
        race_id=race.id,
        bet_type=rec.bet_type,
        numbers=rec.numbers,
        amount=rec.amount
    )
```

## ğŸ“ˆ ä¸»è¦æ©Ÿèƒ½è©³ç´°

### BoatraceOpenAPIé€£æº
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ»ç›´å‰æƒ…å ±ãƒ»çµæœAPI
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½**: APIå‘¼ã³å‡ºã—æœ€é©åŒ–
- **ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹**: æ¥ç¶šã‚¨ãƒ©ãƒ¼æ™‚ã®è‡ªå‹•å†è©¦è¡Œ

### ç«¶æŠ€å ´ç‰¹æ€§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
```python
# ç«¶æŠ€å ´åˆ†æä¾‹
stadium_manager = StadiumManager()
analysis = stadium_manager.get_stadium_analysis(3)  # æ±Ÿæˆ¸å·

print(f"æ°´é¢ã‚¿ã‚¤ãƒ—: {analysis['characteristics'].water_type}")
print(f"æ½®æ±å½±éŸ¿: {analysis['characteristics'].is_tidal}")
print(f"ã‚¤ãƒ³ã‚³ãƒ¼ã‚¹æœ‰åˆ©åº¦: {analysis['characteristics'].inside_advantage}")
```

### äºˆæƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
1. **é¸æ‰‹æˆç¸¾è©•ä¾¡** - å‹ç‡ãƒ»ã‚¯ãƒ©ã‚¹ãƒ»é©æ€§ã‚’æ•°å€¤åŒ–
2. **ç«¶æŠ€å ´è£œæ­£** - æ°´é¢ç‰¹æ€§ã«ã‚ˆã‚‹æœ‰åˆ©ä¸åˆ©ã‚’è€ƒæ…®
3. **ç¢ºç‡è¨ˆç®—** - çµ±è¨ˆåˆ†æã«ã‚ˆã‚‹å„è‰‡ã®å‹ç‡ç®—å‡º
4. **è²·ã„ç›®æ¨å¥¨** - æœŸå¾…å€¤ã¨ãƒªã‚¹ã‚¯ã‚’è€ƒæ…®ã—ãŸæŠ•ç¥¨æˆ¦ç•¥

### æŠ•ç¥¨æˆ¦ç•¥
- **ä¿å®ˆçš„æˆ¦ç•¥**: æœ¬å‘½ä¸­å¿ƒã®æ‰‹å …ã„æŠ•ç¥¨
- **ãƒãƒ©ãƒ³ã‚¹æˆ¦ç•¥**: æœ¬å‘½ã¨ç©´ã®ãƒãƒ©ãƒ³ã‚¹å‹
- **ç©æ¥µæˆ¦ç•¥**: é«˜é…å½“ç‹™ã„ã®å¤šç‚¹å‹è² 
- **AIæˆ¦ç•¥**: äºˆæƒ³ç¢ºç‡ã«åŸºã¥ãæœ€é©é…åˆ†

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«
- `stadiums` - ç«¶æŠ€å ´ãƒã‚¹ã‚¿ï¼ˆç‰¹æ€§æƒ…å ±å«ã‚€ï¼‰
- `racers` - é¸æ‰‹ãƒã‚¹ã‚¿ï¼ˆæˆç¸¾ãƒ»ã‚¯ãƒ©ã‚¹æƒ…å ±ï¼‰
- `races` - ãƒ¬ãƒ¼ã‚¹ãƒã‚¹ã‚¿ï¼ˆæ—¥ç¨‹ãƒ»æ¡ä»¶ï¼‰
- `race_entries` - å‡ºèµ°æƒ…å ±ï¼ˆé¸æ‰‹Ã—ãƒ¬ãƒ¼ã‚¹ï¼‰
- `predictions` - äºˆæƒ³çµæœï¼ˆç¢ºç‡ãƒ»æ¨å¥¨è²·ã„ç›®ï¼‰
- `betting_tickets` - èˆŸåˆ¸è³¼å…¥å±¥æ­´
- `race_results` - ãƒ¬ãƒ¼ã‚¹çµæœãƒ»é…å½“

## ğŸ›¡ï¸ ãƒªã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½

### ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æ
```python
portfolio = Portfolio(initial_capital=Decimal('100000'))

# åæ”¯ã‚µãƒãƒªãƒ¼
balance = portfolio.get_current_balance()
print(f"ROI: {balance['roi']:.2f}%")

# ãƒªã‚¹ã‚¯åˆ†æ
risk_analysis = portfolio.get_risk_analysis()
print(f"ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«: {risk_analysis['overall_risk_level']}")

# æœ€é©è³­ã‘é‡‘è¨ˆç®—
optimal_bet = portfolio.optimize_bet_sizing(
    prediction_confidence=0.75,
    expected_odds=3.0
)
```

## ğŸ¯ ç‰¹å¾´ãƒ»å„ªä½æ€§

1. **å…¬å¼ãƒ‡ãƒ¼ã‚¿æ´»ç”¨** - BoatraceOpenAPIã‹ã‚‰æœ€æ–°ã®æ­£ç¢ºãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
2. **ç«¶æŠ€å ´ç‰¹æ€§é‡è¦–** - å…¨24ç«¶æŠ€å ´ã®æ°´é¢æ¡ä»¶ã‚’è©³ç´°ã«è€ƒæ…®
3. **çµ±è¨ˆåˆ†æãƒ™ãƒ¼ã‚¹** - å®¢è¦³çš„ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãäºˆæƒ³ç”Ÿæˆ
4. **æˆ¦ç•¥çš„æŠ•ç¥¨** - å¤šæ§˜ãªæŠ•ç¥¨æˆ¦ç•¥ã¨è³‡é‡‘ç®¡ç†æ©Ÿèƒ½
5. **åŒ…æ‹¬çš„åˆ†æ** - é¸æ‰‹ãƒ»ãƒ¬ãƒ¼ã‚¹ãƒ»åæ”¯ã‚’çµ±åˆçš„ã«ç®¡ç†

## ğŸ“ ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### Phase 2 (é€²è¡Œä¸­)
- èˆŸåˆ¸è³¼å…¥ãƒ»ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Œæˆ
- Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å®Ÿè£…

### Phase 3 (äºˆå®š)
- æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®è¿½åŠ 
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ äºˆæƒ³æ›´æ–°
- è‡ªå‹•æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ ï¼ˆTELEBOATé€£æºï¼‰

### Phase 4 (æ§‹æƒ³)
- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå¯¾å¿œ
- ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
- APIæä¾›

## âš ï¸ æ³¨æ„äº‹é …

- **æŠ•è³‡ã¯è‡ªå·±è²¬ä»»**: æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯äºˆæƒ³æ”¯æ´ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€æŠ•è³‡çµæœã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“
- **é©åº¦ãªæŠ•è³‡**: ã‚®ãƒ£ãƒ³ãƒ–ãƒ«ä¾å­˜ã«æ³¨æ„ã—ã€ä½™å‰°è³‡é‡‘ã§ã®æŠ•è³‡ã‚’æ¨å¥¨ã—ã¾ã™
- **æ³•çš„åˆ¶é™**: æœªæˆå¹´è€…ã®åˆ©ç”¨ã‚„æ³•çš„åˆ¶é™ã®ã‚ã‚‹åœ°åŸŸã§ã®åˆ©ç”¨ã¯ç¦æ­¢ã§ã™

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ã‚¤ã‚·ãƒ¥ãƒ¼å ±å‘Šã‚’æ­“è¿ã—ã¾ã™ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

**ğŸš¤ ç«¶è‰‡äºˆæƒ³ã®æ–°ã—ã„ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã‚’ç›®æŒ‡ã—ã¦**