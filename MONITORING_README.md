# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ 

Day Trade ã‚·ã‚¹ãƒ†ãƒ ç”¨ã®åŒ…æ‹¬çš„ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ä¸»è¦æ©Ÿèƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†**: ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™ã‚’ç§’å˜ä½ã§åé›†
- **Prometheusçµ±åˆ**: æ¥­ç•Œæ¨™æº–ãƒ¡ãƒˆãƒªã‚¯ã‚¹å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»ã‚¯ã‚¨ãƒª
- **Grafanaå¯è¦–åŒ–**: ç¾ã—ã„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
- **ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ©ãƒ¼ãƒˆ**: å¤šæ®µéšã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ**: ã‚·ã‚¹ãƒ†ãƒ ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®šãƒ»æœ€é©åŒ–ææ¡ˆ

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Prometheus**: ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ãƒ»ä¿å­˜ã‚¨ãƒ³ã‚¸ãƒ³
- **Grafana**: å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **AlertManager**: ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ãƒ»é€šçŸ¥
- **FastAPI**: ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼API
- **Docker**: ã‚³ãƒ³ãƒ†ãƒŠåŒ–ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
python test_monitoring_simple.py
```

### 2. ç›£è¦–ç’°å¢ƒèµ·å‹•
```bash
docker-compose -f docker-compose.monitoring.yml up -d
```

### 3. Web UI ã‚¢ã‚¯ã‚»ã‚¹
- **Grafana**: http://localhost:3000 (admin/admin123)
- **Prometheus**: http://localhost:9090
- **AlertManager**: http://localhost:9093
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: http://localhost:8000/metrics

## ğŸ“Š ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†é …ç›®

### ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- CPUä½¿ç”¨ç‡
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµ±è¨ˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ—ãƒ¼ãƒ«

### ãƒªã‚¹ã‚¯ç®¡ç†ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- ãƒªã‚¹ã‚¯åˆ†æå®Ÿè¡Œå›æ•°ãƒ»å‡¦ç†æ™‚é–“
- ç¾åœ¨ã®ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ï¼ˆéŠ˜æŸ„åˆ¥ï¼‰
- ä¸æ­£æ¤œçŸ¥çµæœãƒ»ç²¾åº¦
- ãƒªã‚¹ã‚¯ã‚¢ãƒ©ãƒ¼ãƒˆç™ºç”Ÿå›æ•°
- ãƒªã‚¹ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçŠ¶æ…‹

### å–å¼•ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- å–å¼•å®Ÿè¡Œå›æ•°ãƒ»çµæœ
- å–å¼•åŸ·è¡Œæ™‚é–“
- ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªä¾¡å€¤
- æœªå®Ÿç¾ãƒ»å®Ÿç¾æç›Š
- å‹ç‡ãƒ»æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³

### AI ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- AIäºˆæ¸¬å®Ÿè¡Œå›æ•°ãƒ»å‡¦ç†æ™‚é–“
- äºˆæ¸¬ç²¾åº¦
- ç”ŸæˆAI APIå‘¼ã³å‡ºã—çµ±è¨ˆ
- GPUä½¿ç”¨ç‡
- ãƒ¢ãƒ‡ãƒ«è¨“ç·´çŠ¶æ³

## ğŸ”” ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

### ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«
- **Critical**: å³åº§é€šçŸ¥ï¼ˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ >0.9ï¼‰
- **High**: 5åˆ†ä»¥å†…é€šçŸ¥ï¼ˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ >0.7ï¼‰
- **Medium**: é€šå¸¸é€šçŸ¥ï¼ˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ >0.5ï¼‰
- **Low**: æƒ…å ±ãƒ¬ãƒ™ãƒ«

### é€šçŸ¥ãƒãƒ£ãƒãƒ«
- Emailé€šçŸ¥
- Slackçµ±åˆï¼ˆè¨­å®šã«ã‚ˆã‚Šï¼‰
- Webhooké€£æº

## ğŸ› ï¸ è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³

### 1. Prometheusè¨­å®š
- ãƒ•ã‚¡ã‚¤ãƒ«: `monitoring/prometheus/prometheus.yml`
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—é–“éš”ã€ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«ç­‰ã‚’èª¿æ•´

### 2. Grafana ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: `monitoring/grafana/dashboard_configs/`
- JSONå½¢å¼ã§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­å®š

### 3. AlertManagerè¨­å®š
- ãƒ•ã‚¡ã‚¤ãƒ«: `monitoring/alertmanager/alertmanager.yml`
- é€šçŸ¥ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€å—ä¿¡è€…è¨­å®š

### 4. ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¿½åŠ 
```python
from src.day_trade.monitoring.metrics import get_metrics_collector

collector = get_metrics_collector()
# ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®Ÿè£…
```

## ğŸ”§ é–‹ç™ºè€…å‘ã‘

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ä½¿ç”¨
```python
from src.day_trade.monitoring.metrics.decorators import measure_execution_time

@measure_execution_time(component="my_component")
async def my_function():
    # è‡ªå‹•çš„ã«å®Ÿè¡Œæ™‚é–“æ¸¬å®šãƒ»è¨˜éŒ²
    pass
```

### ãƒªã‚¹ã‚¯åˆ†æãƒ¡ãƒˆãƒªã‚¯ã‚¹çµ±åˆ
```python
from src.day_trade.monitoring.metrics.decorators import measure_risk_analysis_performance

@measure_risk_analysis_performance()
async def my_risk_analysis():
    # ãƒªã‚¹ã‚¯åˆ†æãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è‡ªå‹•æ¸¬å®š
    return risk_result
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
monitoring/
â”œâ”€â”€ prometheus/                 # Prometheusè¨­å®š
â”‚   â”œâ”€â”€ prometheus.yml         # ãƒ¡ã‚¤ãƒ³è¨­å®š
â”‚   â””â”€â”€ rules/                 # ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ grafana/                   # Grafanaè¨­å®š
â”‚   â”œâ”€â”€ datasources/          # ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹è¨­å®š
â”‚   â”œâ”€â”€ dashboards/           # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°
â”‚   â””â”€â”€ dashboard_configs/    # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰JSON
â”œâ”€â”€ alertmanager/             # AlertManagerè¨­å®š
â”‚   â””â”€â”€ alertmanager.yml      # é€šçŸ¥è¨­å®š
â””â”€â”€ Dockerfile.exporter       # ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼

src/day_trade/monitoring/
â”œâ”€â”€ metrics/                  # ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ prometheus_metrics.py # Prometheusãƒ¡ãƒˆãƒªã‚¯ã‚¹å®šç¾©
â”‚   â”œâ”€â”€ decorators.py         # æ¸¬å®šãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â””â”€â”€ metrics_exporter.py   # HTTPã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼
```

## ğŸ¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

### ç›®æ¨™å€¤
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†é–“éš”**: 1-15ç§’
- **ã‚¢ãƒ©ãƒ¼ãƒˆå¿œç­”æ™‚é–“**: 5ç§’ä»¥å†…
- **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
- **ã‚·ã‚¹ãƒ†ãƒ è² è·**: CPU <5%

### å®Ÿç¸¾å€¤ï¼ˆãƒ†ã‚¹ãƒˆç’°å¢ƒï¼‰
- âœ… ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†: 100%æˆåŠŸ
- âœ… ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“: 0.001ç§’
- âœ… ã‚µãƒ¼ãƒãƒ¼èµ·å‹•: å³åº§
- âœ… ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: å…¨ã¦æ­£å¸¸

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ã‚¨ãƒ©ãƒ¼**
   ```bash
   # ä¾å­˜é–¢ä¿‚ç¢ºèª
   pip install prometheus-client fastapi uvicorn psutil
   ```

2. **ãƒãƒ¼ãƒˆç«¶åˆ**
   ```bash
   # ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ç¢ºèª
   netstat -an | findstr :8000
   ```

3. **Dockerèµ·å‹•ã‚¨ãƒ©ãƒ¼**
   ```bash
   # ãƒ­ã‚°ç¢ºèª
   docker-compose -f docker-compose.monitoring.yml logs
   ```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ Day Trade ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€éƒ¨ã¨ã—ã¦ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§æä¾›ã•ã‚Œã¾ã™ã€‚

## ğŸ¤ è²¢çŒ®

ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆã€æ©Ÿèƒ½è¦æœ›ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ã€‚

---

**Day Trade Team** - 2025å¹´8æœˆ10æ—¥
